<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Скачать файл</title>
</head>
<body>
    <h2>Скачивание файла</h2>
    <div id="downloadStatus">Пытаемся скачать файл автоматически...</div>
    <button id="manualDownload" style="display: none;">Скачать вручную</button>

    <script>
        // Получаем текущий URL страницы
        const currentUrl = window.location.href;
        
        // Определяем базовый URL репозитория
        let repoBaseUrl;
        
        // Если это GitHub Pages (user.github.io/repo)
        if (currentUrl.includes('github.io')) {
            const pathParts = currentUrl.split('/');
            const repoName = pathParts[3]; // Название репозитория
            repoBaseUrl = `https://raw.githubusercontent.com/${pathParts[2]}/${repoName}/main/`;
        } 
        // Если это прямой доступ к HTML в репозитории
        else if (currentUrl.includes('github.com')) {
            repoBaseUrl = currentUrl.replace('github.com', 'raw.githubusercontent.com').replace('/blob/', '/');
        }
        // Если локальный файл или другой хостинг
        else {
            repoBaseUrl = './'; // Относительный путь
        }
        
        // Имя файла для скачивания (замените на нужное)
        const fileName = 'example.txt';
        const fileUrl = repoBaseUrl + fileName;

        function downloadFile() {
            fetch(fileUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Файл не найден');
                    }
                    return response.blob();
                })
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = fileName;
                    document.body.appendChild(a);
                    a.click();
                    window.URL.revokeObjectURL(url);
                    document.getElementById('downloadStatus').textContent = 'Файл успешно скачан!';
                })
                .catch(error => {
                    console.error('Ошибка скачивания:', error);
                    document.getElementById('downloadStatus').textContent = 'Не удалось скачать файл автоматически.';
                    document.getElementById('manualDownload').style.display = 'block';
                });
        }

        // Пытаемся скачать автоматически при загрузке страницы
        window.addEventListener('DOMContentLoaded', downloadFile);

        // Обработчик для кнопки ручного скачивания
        document.getElementById('manualDownload').addEventListener('click', downloadFile);
    </script>
</body>
</html>
